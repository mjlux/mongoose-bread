"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,c){if(b){if("string"==typeof b)return _arrayLikeToArray(b,c);var a={}.toString.call(b).slice(8,-1);return"Object"===a&&b.constructor&&(a=b.constructor.name),"Map"===a||"Set"===a?Array.from(b):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(b,c):void 0}}function _arrayLikeToArray(b,c){(null==c||c>b.length)&&(c=b.length);for(var d=0,f=Array(c);d<c;d++)f[d]=b[d];return f}function _iterableToArrayLimit(b,c){var d=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=d){var g,h,j,k,l=[],a=!0,m=!1;try{if(j=(d=d.call(b)).next,0===c){if(Object(d)!==d)return;a=!1}else for(;!(a=(g=j.call(d)).done)&&(l.push(g.value),l.length!==c);a=!0);}catch(a){m=!0,h=a}finally{try{if(!a&&null!=d.return&&(k=d.return(),Object(k)!==k))return}finally{if(m)throw h}}return l}}function _arrayWithHoles(a){if(Array.isArray(a))return a}var toBreadErrorFactory=require("./toBreadErrorFactory");function rehabilitateFactory(a){var b=a.customLabels,c=b.docs,d=b.modifiedCount,e=b.acknowledged,f=function(a){var b,f,g=_slicedToArray(a,2),h=g[0],i=g[1];return{[c]:i,[e]:null===(b=h.acknowledged)||void 0===b||b,[d]:null!==(f=h.modifiedCount)&&void 0!==f?f:h.nModified}},g=toBreadErrorFactory({[c]:[],[e]:!1,[d]:0});return function(a){var b=this,c=a.query;return this.findWithDeleted(c,{_id:1}).then(function mergeRestoreAndDocs(a){return Promise.all([b.restore(c),Promise.resolve(a)])}).then(f).catch(g)}}module.exports=rehabilitateFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0b0JyZWFkRXJyb3JGYWN0b3J5IiwicmVxdWlyZSIsInJlaGFiaWxpdGF0ZUZhY3RvcnkiLCJwbHVnaW5PcHRpb25zIiwiYiIsImN1c3RvbUxhYmVscyIsImRvY3MiLCJtb2RpZmllZENvdW50IiwiYWNrbm93bGVkZ2VkIiwidG9CcmVhZFJlc3VsdCIsImEiLCJmIiwiZyIsIl9zbGljZWRUb0FycmF5IiwicmVzdWx0IiwiX2RvY3MiLCJuTW9kaWZpZWQiLCJ0b0JyZWFkRXJyb3IiLCJvcHRpb25zIiwicXVlcnkiLCJmaW5kV2l0aERlbGV0ZWQiLCJfaWQiLCJ0aGVuIiwibWVyZ2VSZXN0b3JlQW5kRG9jcyIsIlByb21pc2UiLCJhbGwiLCJyZXN0b3JlIiwicmVzb2x2ZSIsImNhdGNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mYWN0b3JpZXMvcmVoYWJpbGl0YXRlRmFjdG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTb2Z0RGVsZXRlTW9kZWwgfSBmcm9tIFwibW9uZ29vc2UtZGVsZXRlXCI7XG5pbXBvcnQgeyBNb25nb29zZUJyZWFkT3B0aW9ucywgTW9uZ29vc2VCcmVhZFJlaGFiaWxpdGF0ZU9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IE1vZGVsIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IHRvQnJlYWRFcnJvckZhY3RvcnkgPSByZXF1aXJlKFwiLi90b0JyZWFkRXJyb3JGYWN0b3J5XCIpO1xuXG5mdW5jdGlvbiByZWhhYmlsaXRhdGVGYWN0b3J5KHBsdWdpbk9wdGlvbnM6IE1vbmdvb3NlQnJlYWRPcHRpb25zKSB7XG5cdGNvbnN0IHsgZG9jcywgbW9kaWZpZWRDb3VudCwgYWNrbm93bGVkZ2VkIH0gPSBwbHVnaW5PcHRpb25zLmN1c3RvbUxhYmVscztcblx0Y29uc3QgdG9CcmVhZFJlc3VsdCA9IChbcmVzdWx0LCBfZG9jc106IFthbnksIGFueVtdXSkgPT4gKHtcblx0XHRbZG9jc106IF9kb2NzLFxuXHRcdFthY2tub3dsZWRnZWRdOiByZXN1bHQuYWNrbm93bGVkZ2VkID8/IHRydWUsXG5cdFx0W21vZGlmaWVkQ291bnRdOiByZXN1bHQubW9kaWZpZWRDb3VudCA/PyByZXN1bHQubk1vZGlmaWVkLFxuXHR9KTtcblx0Y29uc3QgdG9CcmVhZEVycm9yID0gdG9CcmVhZEVycm9yRmFjdG9yeSh7XG5cdFx0W2RvY3NdOiBbXSxcblx0XHRbYWNrbm93bGVkZ2VkXTogZmFsc2UsXG5cdFx0W21vZGlmaWVkQ291bnRdOiAwLFxuXHR9KTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gcmVoYWJpbGl0YXRlKHRoaXM6IE1vZGVsPGFueT4gJiBTb2Z0RGVsZXRlTW9kZWw8YW55Piwgb3B0aW9uczogTW9uZ29vc2VCcmVhZFJlaGFiaWxpdGF0ZU9wdGlvbnMpIHtcblx0XHRjb25zdCB7IHF1ZXJ5IH0gPSBvcHRpb25zO1xuXHRcdGNvbnN0IG1lcmdlUmVzdG9yZUFuZERvY3MgPSAoX2RvY3M6IGFueSkgPT4gUHJvbWlzZS5hbGwoW3RoaXMucmVzdG9yZShxdWVyeSksIFByb21pc2UucmVzb2x2ZShfZG9jcyldKTtcblx0XHRyZXR1cm4gdGhpcy5maW5kV2l0aERlbGV0ZWQocXVlcnksIHsgX2lkOiAxIH0pLnRoZW4obWVyZ2VSZXN0b3JlQW5kRG9jcykudGhlbih0b0JyZWFkUmVzdWx0KS5jYXRjaCh0b0JyZWFkRXJyb3IpO1xuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlaGFiaWxpdGF0ZUZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI0dUNBSUEsR0FBTSxDQUFBQSxtQkFBbUIsQ0FBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBRTVELFFBQVMsQ0FBQUMsbUJBQW1CQSxDQUFDQyxDQUFtQyxDQUFFLEtBQUFDLENBQUEsQ0FDbkJELENBQWEsQ0FBQ0UsWUFBWSxDQUFoRUMsQ0FBSSxDQUFBRixDQUFBLENBQUpFLElBQUksQ0FBRUMsQ0FBYSxDQUFBSCxDQUFBLENBQWJHLGFBQWEsQ0FBRUMsQ0FBWSxDQUFBSixDQUFBLENBQVpJLFlBQVksQ0FDbkNDLENBQWEsQ0FBRyxRQUFBQSxDQUFBQyxDQUFBLE1BQUFOLENBQUEsQ0FBQU8sQ0FBQSxDQUFBQyxDQUFBLENBQUFDLGNBQUEsQ0FBQUgsQ0FBQSxJQUFFSSxDQUFNLENBQUFGLENBQUEsSUFBRUcsQ0FBSyxDQUFBSCxDQUFBLFVBQXFCLENBQ3pELENBQUNOLENBQUksRUFBR1MsQ0FBSyxDQUNiLENBQUNQLENBQVksVUFBQUosQ0FBQSxDQUFHVSxDQUFNLENBQUNOLFlBQVksWUFBQUosQ0FBQSxFQUFBQSxDQUFRLENBQzNDLENBQUNHLENBQWEsVUFBQUksQ0FBQSxDQUFHRyxDQUFNLENBQUNQLGFBQWEsWUFBQUksQ0FBQSxDQUFBQSxDQUFBLENBQUlHLENBQU0sQ0FBQ0UsU0FDakQsQ0FBQyxDQUFDLENBQ0lDLENBQVksQ0FBR2pCLG1CQUFtQixDQUFDLENBQ3hDLENBQUNNLENBQUksRUFBRyxFQUFFLENBQ1YsQ0FBQ0UsQ0FBWSxJQUFRLENBQ3JCLENBQUNELENBQWEsRUFBRyxDQUNsQixDQUFDLENBQUMsQ0FFRixNQUFPLFVBQStEVyxDQUF5QyxDQUFFLEtBQUFkLENBQUEsTUFDeEdlLENBQUssQ0FBS0QsQ0FBTyxDQUFqQkMsS0FBSyxDQUViLE1BQU8sS0FBSSxDQUFDQyxlQUFlLENBQUNELENBQUssQ0FBRSxDQUFFRSxHQUFHLENBQUUsQ0FBRSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUR2QixRQUF0QixDQUFBQyxtQkFBbUJBLENBQUlSLENBQVUsUUFBSyxDQUFBUyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDckIsQ0FBSSxDQUFDc0IsT0FBTyxDQUFDUCxDQUFLLENBQUMsQ0FBRUssT0FBTyxDQUFDRyxPQUFPLENBQUNaLENBQUssQ0FBQyxDQUFDLENBQUMsQ0FDL0IsQ0FBQyxDQUFDTyxJQUFJLENBQUNiLENBQWEsQ0FBQyxDQUFDbUIsS0FBSyxDQUFDWCxDQUFZLENBQ2hILENBQ0QsQ0FFQVksTUFBTSxDQUFDQyxPQUFPLENBQUc1QixtQkFBbUIiLCJpZ25vcmVMaXN0IjpbXX0=